-- Aimbot estável (SEM SHAKE)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LP = Players.LocalPlayer

local Aimbot = {}
Aimbot.Enabled = false
Aimbot.Smooth = 0.2
Aimbot.Target = nil

-- CONFIGURA ISSO COM TEU CHECK DE INIMIGO
function Aimbot:IsEnemy(model)
    return model.Name == "soldier_model"
       and not model:FindFirstChild("friendly_marker")
       and model:FindFirstChild("HumanoidRootPart")
end

local function acquireTarget()
    local closest, dist = nil, math.huge
    local camPos = Camera.CFrame.Position

    for _,m in pairs(workspace:GetChildren()) do
        if m:IsA("Model") and Aimbot:IsEnemy(m) then
            local hrp = m.HumanoidRootPart
            local d = (camPos - hrp.Position).Magnitude
            if d < dist then
                dist = d
                closest = hrp
            end
        end
    end

    return closest
end

-- LOOP ÚNICO (NUNCA DUPLICA)
RunService:BindToRenderStep("AimbotLock", 200, function()
    if not Aimbot.Enabled then return end

    if not Aimbot.Target
    or not Aimbot.Target.Parent then
        Aimbot.Target = acquireTarget()
    end

    if not Aimbot.Target then return end

    local camPos = Camera.CFrame.Position
    local targetPos = Aimbot.Target.Position

    Camera.CFrame = Camera.CFrame:Lerp(
        CFrame.new(camPos, targetPos),
        Aimbot.Smooth
    )
end)

function Aimbot:Enable()
    self.Enabled = true
end

function Aimbot:Disable()
    self.Enabled = false
    self.Target = nil
end

return Aimbot
